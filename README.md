# Multi-Host Microservices E-Commerce Project

Этот проект представляет собой реализацию микросервисной архитектуры для платформы электронной коммерции, развернутой на нескольких хостах. Он включает в себя такие сервисы, как `UserService`, `ProductService`, `OrderService`, и `ApiGateway` для маршрутизации запросов. Проект также включает в себя полноценную систему мониторинга и трассировки с использованием `Prometheus`, `Grafana` и `Jaeger`.

-----

## Архитектура

Проект разделен на два сервера (`Server1` и `Server2`), каждый из которых содержит свой набор сервисов и инфраструктуры.

### Server1

  * **ApiGateway**: Единая точка входа для всех клиентских запросов. Проксирует запросы к соответствующим микросервисам.
  * **OrderService**: Отвечает за управление заказами. Взаимодействует с `UserService` и `ProductService` для получения информации о пользователях и товарах.
  * **Frontend**: Простой одностраничный пользовательский интерфейс для взаимодействия с системой.
  * **База данных**: `SQL Server` для `OrderService`.
  * **Кэширование**: `Redis` для кэширования данных о пользователях в `OrderService`.
  * **Мониторинг**: `Prometheus` для сбора метрик, `Grafana` для визуализации и `Jaeger` для трассировки.

### Server2

  * **UserService**: Отвечает за управление пользователями и аутентификацию.
  * **ProductService**: Отвечает за управление товарами.
  * **Базы данных**: Два отдельных экземпляра `SQL Server`, по одному для каждого сервиса.

-----

## Технологии

  * **Бэкенд**: .NET 8, ASP.NET Core
  * **Фронтенд**: HTML, CSS, JavaScript
  * **Базы данных**: MS SQL Server, Redis
  * **Контейнеризация**: Docker, Docker Compose
  * **Мониторинг и трассировка**: OpenTelemetry, Prometheus, Grafana, Jaeger
  * **API Gateway**: Самописный на ASP.NET Core

-----

## Запуск проекта

### Предварительные требования

  * Docker
  * Docker Compose

### Инструкции

1.  **Клонируйте репозиторий:**
    ```bash
    git clone [<URL репозитория>](https://github.com/Muhammadislom99/MultiHost_Microservices)
    ```
2.  **Перейдите в директорию `Server1` и запустите контейнеры:**
    ```bash
    cd Server1
    docker-compose -f server1-compose.yml up -d
    ```
3.  **Перейдите в директорию `Server2` и запустите контейнеры:**
    ```bash
    cd ../Server2
    docker-compose -f server2-compose.yml up -d
    ```

### Доступные эндпоинты

  * **Frontend**: `http://localhost:3000`
  * **API Gateway**: `http://localhost:5000`
  * **Prometheus**: `http://localhost:9090`
  * **Grafana**: `http://localhost:3001`
  * **Jaeger**: `http://localhost:16686`

-----

## Обзор сервисов

### UserService

  * **Описание**: Управляет данными пользователей, включая регистрацию и аутентификацию.
  * **Порт**: `5001`
  * **База данных**: `sqlserver-users` на порту `1433`

### ProductService

  * **Описание**: Предоставляет информацию о товарах, включая их наличие и цены.
  * **Порт**: `5002`
  * **База данных**: `sqlserver-products` на порту `1434`

### OrderService

  * **Описание**: Обрабатывает заказы, взаимодействуя с `UserService` и `ProductService`.
  * **Порт**: `5003`
  * **База данных**: `sqlserver-orders` на порту `1435`

### ApiGateway

  * **Описание**: Проксирует запросы от клиента к микросервисам.
  * **Порт**: `5000`

### Frontend

  * **Описание**: Пользовательский интерфейс для взаимодействия с платформой.
  * **Порт**: `3000`

-----

## Мониторинг и трассировка

Проект использует `OpenTelemetry` для сбора телеметрических данных (метрик и трейсов).

### Компоненты

  * **OpenTelemetry Collector**: Принимает данные от сервисов и экспортирует их в `Prometheus` и `Jaeger`.
  * **Prometheus**: Собирает и хранит метрики.
  * **Grafana**: Визуализирует метрики из `Prometheus` с помощью готовых дашбордов.
  * **Jaeger**: Собирает и визуализирует трейсы, позволяя отслеживать запросы между сервисами.
